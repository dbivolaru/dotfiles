# vim:fileencoding=utf-8:ft=conf:foldmethod=marker

#: Fonts {{{

font_family             monospace
font_size               11.0
bold_font               auto
italic_font             auto
bold_italic_font        auto
force_ltr               no

#: }}}

#: System / Environment {{{

shell                   /usr/bin/env bash --login
editor                  vimx
linux_display_server    x11
update_check_interval   0
close_on_child_death    no

#: }}}

#: Keyboard Shortcuts {{{

# The defaults interfere with ANSI terminal escape codes
clear_all_shortcuts         yes
kitty_mod                   ctrl+shift

## Clipboard
copy_on_select              yes
map ctrl+shift+c            copy_to_clipboard
map ctrl+shift+v            paste_from_clipboard
map shift+insert            paste_from_selection
map kitty_mod+s             launch --stdin-source=@selection --type overlay /usr/bin/env python3 -c "import webbrowser, urllib.parse;webbrowser.open_new_tab('https://www.google.com/search?ie=UTF-8&q={}'.format(urllib.parse.quote(input())))"

## Scrolling
map shift+page_up           scroll_page_up
map shift+page_down         scroll_page_down
map shift+home              scroll_home
map shift+end               scroll_end
map shift+up                scroll_line_up
map shift+down              scroll_line_down

## Window management
map kitty_mod+w>w           new_window_with_cwd
map kitty_mod+w>v           new_window_with_cwd
map kitty_mod+w>s           new_window_with_cwd
map kitty_mod+w>n           new_os_window_with_cwd

map kitty_mod+w>q           close_window
map kitty_mod+w>c           close_window
map kitty_mod+w>right       next_window
map kitty_mod+w>left        previous_window

map kitty_mod+w>.           move_window_forward
map kitty_mod+w>,           move_window_backward
map kitty_mod+w>t           move_window_to_top
map kitty_mod+w>r           start_resizing_window

map kitty_mod+w>1           first_window
map kitty_mod+w>2           second_window
map kitty_mod+w>3           third_window
map kitty_mod+w>4           fourth_window
map kitty_mod+w>5           fifth_window
map kitty_mod+w>6           sixth_window
map kitty_mod+w>7           seventh_window
map kitty_mod+w>8           eighth_window
map kitty_mod+w>9           ninth_window
map kitty_mod+w>0           tenth_window

## Tab management
map kitty_mod+t>t           new_tab_with_cwd !neighbor
map kitty_mod+t>n           new_tab_with_cwd !neighbor
map kitty_mod+t>v           new_tab_with_cwd !neighbor
map kitty_mod+t>s           new_tab_with_cwd !neighbor
map kitty_mod+t>q           close_tab
map kitty_mod+t>c           close_tab

map kitty_mod+t>right       next_tab
map kitty_mod+t>left        previous_tab

map kitty_mod+t>.           move_tab_forward
map kitty_mod+t>,           move_tab_backward
map kitty_mod+t>s           set_tab_title

## Parse visible text
map kitty_mod+p>f           kitten hints --type path --program -
map kitty_mod+p>l           kitten hints --type line --program -
map kitty_mod+p>w           kitten hints --type word --program -
map kitty_mod+p>x           kitten hints --type hash --program -

map kitty_mod+p>u           kitten hints
map kitty_mod+p>h           kitten hints --type hyperlink
map kitty_mod+p>n           kitten hints --type linenum
map kitty_mod+p>o           kitten hints --type path

## Scrollback save and clear - this might confuse vttest but it's useful for bash
map ctrl+l                  combine : clear_terminal scroll active : send_text all \x0c
map ctrl+alt+l              combine : clear_terminal scrollback active : send_text all \x1b\x0c

## Misc (VT style keys PF1 .. PF4)
map kitty_mod+num_lock      send_text all \x1bOP
map kitty_mod+kp_divide     send_text all \x1bOQ
map kitty_mod+kp_multiply   send_text all \x1bOR
map kitty_mod+kp_minus      send_text all \x1bOS

## Misc (VT style keys F1 .. F4)
map f1                      send_text all \x1b[11~
map f2                      send_text all \x1b[12~
map f3                      send_text all \x1b[13~
map f4                      send_text all \x1b[14~

## Misc (VT style keys F11 F12 F13 F14)
map ctrl+f1                 send_text all \x1b[23~
map ctrl+f2                 send_text all \x1b[24~
map ctrl+f3                 send_text all \x1b[25~
map ctrl+f4                 send_text all \x1b[26~

## Misc (VT style keys F15/Help F16/Do/Menu)
map ctrl+f5                 send_text all \x1b[28~
map ctrl+f6                 send_text all \x1b[29~

## Misc (VT style keys F17 F18 F19 F20)
map ctrl+f7                 send_text all \x1b[31~
map ctrl+f8                 send_text all \x1b[32~
map ctrl+f9                 send_text all \x1b[33~
map ctrl+f10                send_text all \x1b[34~

## Misc (VT style keys )
map ctrl+f11                send_text all \x1b[42~
map ctrl+f12                send_text all \x1b[43~

## Misc (VT style keys Find / Select)
# Otherwise we don't pass vttest 5 6
map ctrl+hom                send_text all \x1b[1~
map ctrl+end                send_text all \x1b[4~

# ## Misc (VT style non-existent on PC keypad Tab Space Comma)
map ctrl+shift+tab          send_text all \x1bOI
map ctrl+shift+space        send_text all \x1bO\x20
map ctrl+shift+=            send_text all \x1bOX
map ctrl+kp_plus            send_text all \x1bOl
map ctrl+kp_minus           send_text all \x1bOm

# ## Misc (VT style keypad Divide Minus Multiply Plus)
# Otherwise we don't pass vttest 5 5
map kp_delete               send_text all \x1bOn
map kp_divide               send_text all \x1bOo
map kp_minus                send_text all \x1bOm
map kp_multiply             send_text all \x1bOj
map kp_plus                 send_text all \x1bOk
map kp_enter                send_text all \x1bOM

## Misc (VT style keypad)
# Otherwise we don't pass vttest 5 5
map kp_insert               send_text all \x1bOp
map kp_end                  send_text all \x1bOq
map kp_down                 send_text all \x1bOr
map kp_page_down            send_text all \x1bOs
map kp_left                 send_text all \x1bOt
map kp_begin                send_text all \x1bOu
map kp_right                send_text all \x1bOv
map kp_home                 send_text all \x1bOw
map kp_up                   send_text all \x1bOx
map kp_page_up              send_text all \x1bOy

## Misc (VT style terminal setup) F1=Hold F2=Print F3=Setup F4=Data/Talk F5=Break/Disc
map kitty_mod+f1            send_text all \x13
map kitty_mod+alt+f1        send_text all \x11
map kitty_mod+f2            show_scrollback
map kitty_mod+alt+f2        launch --type overlay --stdin-source @alternate_scrollback --stdin-add-formatting --title "less (alt screen)" less -R -S +G
map kitty_mod+f3            edit_config_file
map kitty_mod+alt+f3        combine : load_config_file : clear_terminal reset active : send_text all \x0c
map kitty_mod+f4            kitty_shell overlay
map kitty_mod+f5            signal_child SIGINT
map kitty_mod+alt+f5        signal_child SIGHUP

## Misc (VT style ssh) F1=Wait Connections F2=List Connections F3=Rekey F4=Command Line F5=Break F6=Suspend F7=Terminate
# map ctrl+f1                 send_text all \x0d~&
# map ctrl+f2                 send_text all \x0d~#
# map ctrl+f3                 send_text all \x0d~R
# map ctrl+f4                 send_text all \x0d~C
# map ctrl+f5                 send_text all \x0d~B
# map ctrl+f6                 send_text all \x0d~\x1a
# map ctrl+f7                 send_text all \x0d~.

## Misc (other signals) F6=STOP/CONT F7=TERM/QUIT F8=KILL ^Z=TSTP ^C=INT ^\=QUIT
map kitty_mod+f6            signal_child SIGTSTP
map kitty_mod+f7            signal_child SIGTERM
map kitty_mod+f8            signal_child SIGCONT

map kitty_mod+alt+f6        signal_child SIGSTOP
map kitty_mod+alt+f7        signal_child SIGQUIT
map kitty_mod+alt+f8        signal_child SIGKILL

## Misc (Window)
map kitty_mod+f10           toggle_maximized
map kitty_mod+f11           toggle_fullscreen
map kitty_mod+f12           signal_child SIGWINCH

## Misc (Unicode Emoji, Help)
map kitty_mod+u             kitten unicode_input
map kitty_mod+h             launch --type=overlay --title "less (kitty help)" sh -c '~/.config/kitty/kitty.help | less -R -S'

## History & information
map kitty_mod+x>i           send_text all \x18\x16\x0d\\date;\\uname -a;\\whoami;\\id;\\w -fi;\\last -awin5\x0d\\echo "$SHELL $PROMPT_COMMAND $HISTFILE $HISTSIZE $HISTCONTROL $histfile"\x0d
map kitty_mod+x>f           send_text all \x0d\\lsof -P -w -n\x0d\\ps ax -o ppid,pid,uid,cmd --sort=uid\x0d\\netstat -anpee\x0d
map kitty_mod+x>x           send_text all \x0dset +o history;export HISTSIZE=0;unset HISTFILE;setenv history 0;unsetenv histfile;kill -9 $$;exit\x0d
map kitty_mod+x>c           send_text all \x0dhistory -c;rm -f ~/.*hist* $HISTFILE $histfile;set +o history;export HISTSIZE=0;unset HISTFILE;setenv history 0;unsetenv histfile\x0d

#: }}}

#: Shell Integration {{{

# Manual shell integration
shell_integration           disabled
map kitty_mod+g             show_last_command_output
map kitty_mod+z             scroll_to_prompt -1
map kitty_mod+x             scroll_to_prompt 1

#: }}}

#: Mouse {{{

# This requires shell integration - skip for now
clear_all_mouse_actions     no
mouse_map middle release    ungrabbed paste_from_selection

#: }}}

#: Scrollback {{{

scrollback_pager                less -R -S +INPUT_LINE_NUMBER
scrollback_lines                10000
scrollback_pager_history_size   10
scrollback_fill_enlarged_window yes

#: }}}

#: Window Size and Coloring {{{

sync_to_monitor             no

remember_window_size        no
initial_window_width        160c
initial_window_height       48c

window_border_width         2px
draw_minimal_borders        no
window_margin_width         0
single_window_margin_width  -1
window_padding_width        0
enabled_layouts             tall:bias=67;full_size=2;mirrored=false
cursor_blink_interval       0

tab_bar_style               custom
tab_bar_edge                bottom
tab_bar_min_tabs            1
foreground                  #ffffff
background                  #272822
#background_opacity          0.92
selection_foreground        #272822
selection_background        #ffffff
url_style                   single
strip_trailing_spaces       smart
active_border_color         #cccccc
inactive_border_color       #555555
bell_border_color           #ff5a00

window_alert_on_bell        yes
confirm_os_window_close     -1

#: Colors using Rxvt standard

color0 #000000
color8 #404040

#: black

color1 #cd0000
color9 #ff0000

#: red

color2  #00cd00
color10 #00ff00

#: green

color3  #cdcd00
color11 #ffff00

#: yellow

color4  #0000ee
color12 #005cff

#: blue is Xterm-ish without red hinting

color5  #cd00cd
color13 #ff00ff

#: magenta

color6  #00cdcd
color14 #00ffff

#: cyan

color7  #faebd7
color15 #ffffff

#: white is Xterm-ish

#: }}}

